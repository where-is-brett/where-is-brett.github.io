---
title: "A Faster Pipeline for Cell Fluorescence Measurements"
excerpt: "Measure CTCF even faster with a deep learning module. Pre-release now available for download. Watch video demonstration here."
collection: posts
venue: "University of Sydney, Laboratory of Molecular Neuroscience and Dementia"
location: "Sydney, Australia"
date: 21-8-2021
redirect_from:
  - /ctcf-ml/
  - /CTCF-ml/
  - /cell-fluorescence-ml/
layout: 'post'
category: 
  - Neuroscience
  - Computation
---

## Introduction
This app is an extension to the existing MATLAB tool <a href="https://au.mathworks.com/matlabcentral/fileexchange/97377-corrected-total-cell-fluorescence">Measure Cell Fluorescence</a>, an attempt to improve measurement efficiency by reducing manual labour wherever possible. However, cell fluorescence measurements rely on the accurate delineation of cellular objects, which is itself a time-consuming process, irreplaceable by a simple computer algorithm. This significantly limited the optimisable components in the <a href="https://theolb.readthedocs.io/en/latest/imaging/measuring-cell-fluorescence-using-imagej.html">procedure</a>.

This work is an open source project in attempt to speed up the ROI delineation by implementing a deep learning model. The model assists the labelling process while the user has the option to manually adjust the predicted ROIs. This tool can also be used to generate annotation images in the form of binary masks and instance masks.

Currently, I am working to deliver the most suitable DCNN model for immunofluorescent-labelled images in the mouse model of Alzheimer's disease. The pre-release version implements a [U-Net](https://arxiv.org/abs/1505.04597) + [ResNet-34](https://arxiv.org/abs/1512.03385) model architecture. The model was built and trained on Colaboratory with open-source datasets. If you fancy a go at it with your own dataset, you can download the Jupyter notebook [here](https://colab.research.google.com/drive/1uotbBefDHes1gt3Eu_YwxBAK9ELeWUiw?usp=sharing).


## Pre-requisites
* A valid MATLAB license
* Deep Learning Toolbox (install from MATLAB Add-ons)

## Instructions of CTCF Measurements
1. To open an image, navigate to menu bar: File > Open... > Image
2. Load model
3. Draw bounding boxes on the image axes to predict cellular ROIs. Note: objects at the box border are ignored.
4. (Optional) Draw cellular additional ROIs manually.
5. Click the 'Label' toggle to switch to begin selecting background regions.
6. To calculate CTCF, navigate to menu bar: Measure > CTCF
7. Results are displayed in a table.

**Tips:**
Right click on an ROI object to delete it.
Use the label visibility toggle to recall the ordering of ROI objects.
If you are not familiar with deep learning, read [this](https://developers.google.com/machine-learning/crash-course/classification/thresholding) before adjusting the threshold knob.

## Video Demonstration
<video style="width:100%;height:100%;" class="mejs__player"> 
 	<source src="https://www.brettyang.info/files/videos/CTCF_ML_demo.mp4" type="video/mp4"> 
 	Your browser does not support mp4 video. 
</video> 

<br/>

## Download
The source code will be published in an official release. The pre-release version are now available for download.
<br/>
{% include button.html text="Donwload MATLAB App (Pre-release)" link="https://github.com/where-is-brett/cell-fluorescence-ml/releases/" color="#f68140" %} {% include button.html text="Donwload DCNN Model" link="https://github.com/where-is-brett/cell-fluorescence-ml/blob/main/model-96.h5" color="#0d94e7" %}